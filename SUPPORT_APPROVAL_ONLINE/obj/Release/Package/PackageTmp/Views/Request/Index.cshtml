@model IEnumerable<SUPPORT_APPROVAL_ONLINE.Models.RequestStatus>
@using SUPPORT_APPROVAL_ONLINE.Models
@using SUPPORT_APPROVAL_ONLINE.Util
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
    var user = Session["user"] as tbl_User;
    int no = 0;
}
<title>Tất cả danh sách</title>
<h3>
    Danh sách cần phê duyệt&nbsp;
    <a class="btn btn-app" href="@Url.Action("getRequestByUserApproval", "Business", new {id = user.id })">
        <span class="badge bg-red">@ViewBag.totalRecord</span>
        <i class="fa fa-bullhorn"></i> Notifications
    </a>
</h3>

<a href="@Url.Action("Create")" class="btn btn-info btn-lg">
    <span class="glyphicon glyphicon-plus"></span> Thêm mới
</a>
<div class="x_panel">
    <div class="x_title">
        <h2>Danh sách tất cả phiếu yêu cầu</h2>
        <ul class="nav navbar-right panel_toolbox">
            <li>
                <a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
            </li>
            <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-wrench"></i></a>
                <ul class="dropdown-menu" role="menu">
                    <li>
                        <a href="#">Settings 1</a>
                    </li>
                    <li>
                        <a href="#">Settings 2</a>
                    </li>
                </ul>
            </li>
            <li>
                <a class="close-link"><i class="fa fa-close"></i></a>
            </li>
        </ul>
        <div class="clearfix"></div>
    </div>
    <div class="x_content">
        <table id="datatable" class="table table-striped table-bordered">
            <thead>
                <tr>
                    <th>&nbsp;</th>
                    <th>
                        @Html.DisplayNameFor(model => model.id)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.title)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.dept)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.requestor)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.deptMNG)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.lcaLeader)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.lcaMNG)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.requestorApproval)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.deptMNGConfirm)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.comtor)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.fm)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.gd)
                    </th>

                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model)
                {
                    no = no + 1;
                    <tr>
                        <td>@no</td>
                        <td>
                            <a href="@Url.Action("Details","Request",new {id = item.IdOrigin })">@Html.DisplayFor(modelItem => item.id)</a>
                        </td>
                        <td>@Html.DisplayFor(modelItem => item.title)</td>
                        <td>@Html.DisplayFor(modelItem => item.dept)</td>
                        <td>@Html.DisplayFor(modelItem => item.requestor)</td>
                        @if (item.deptMNG)
                        {
                            <td class="approvalOK">OK</td>
                        }
                        else
                        {
                            <td class="approvalNY">NY</td>
                        }

                        @if (item.lcaLeader)
                        {
                            <td class="approvalOK">OK</td>
                        }
                        else
                        {
                            <td class="approvalNY">NY</td>
                        }

                        @if (item.lcaMNG)
                        {
                            <td class="approvalOK">OK</td>
                        }
                        else
                        {
                            <td class="approvalNY">NY</td>
                        }

                        @if (item.requestorApproval)
                        {
                            <td class="approvalOK">OK</td>
                        }
                        else
                        {
                            <td class="approvalNY">NY</td>
                        }
                        @if (item.deptMNGConfirm)
                        {
                            <td class="approvalOK">OK</td>
                        }
                        else
                        {
                            <td class="approvalNY">NY</td>
                        }

                        @if (item.comtor == (int)Common.StatusApproval.OK)
                        {
                            <td class="approvalOK">OK</td>
                        }
                        else if (item.comtor == (int)Common.StatusApproval.NA)
                        {
                            <td class="approvalIgnor">#N/A</td>
                        }
                        else
                        {
                            <td class="approvalNY">NY</td>
                        }
                        @if (item.fm == (int)Common.StatusApproval.OK)
                        {
                            <td class="approvalOK">OK</td>
                        }
                        else if (item.fm == (int)Common.StatusApproval.NA)
                        {
                            <td class="approvalIgnor">#N/A</td>
                        }
                        else
                        {
                            <td class="approvalNY">NY</td>
                        }

                        @if (item.gd == (int)Common.StatusApproval.OK)
                        {
                            <td class="approvalOK">OK</td>
                        }
                        else if (item.gd == (int)Common.StatusApproval.NA)
                        {
                            <td class="approvalIgnor">#N/A</td>
                        }
                        else
                        {
                            <td class="approvalNY">NY</td>
                        }

                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>